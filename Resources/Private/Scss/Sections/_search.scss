.search {
	@extend %header_element;
	@extend %clearfix;
	float: right;
	height: (3 * $grid);
	margin: (-3.5 * $grid) auto 0; // TODO: Magic number for correct alignment, try to get rid of it
	max-width: 40em;
	position: relative;
	right: ($grid / 2);
	z-index: 1;

	@include respond-to(medium) {
		float: none;
		right: 0;
		margin-top: 0;
	}

	@media(max-width: ($search-width + $grid)) {
		width: 100%;
	}
}

.search_close {
	@include icon('close', false);
	@include transition(color);
	background: none;
	bottom: ($grid / 4);
	border: 0;
	color: $input-border-color;
	height: $grid;
	line-height: 1;
	padding: 0;
	position: absolute;
	right: ($grid / 4);
	width: $grid;

	@include hover {
		background: none;
		color: $link-color;
	}
}

.search_content {
	background: $white;
	border-radius: 0 $br $br;
	box-shadow: $drop-shadow;
	display: none;
	padding: ($grid * 3) $grid $grid;
	position: absolute;
	top: 0;
	width: 100%;

	@include respond-to(medium) {
		border-radius: 0 0 $br $br;
	}

	&.-catalogue a {
		@include link;
	}

	&.-visible {
		display: block;
	}

	a {
		@include link(false);
	}
}

.search_description {
	font-weight: bold;
}

.search_form {
	display: none;
	padding: (.5 * $grid) (.5 * $grid) 0;
	position: relative;
	z-index: 9;

	&.-visible {
		display: block;
	}
}

.search_highlight {
	background: $shadow-light;
}

.search_hint {
	clear: both;
	color: $white;
	float: right;
	font-size: $font-size-small;
	line-height: ($font-size-small / $font-size * $grid);

	.-show-popup & {
		@extend .sr-only;
	}
}

.search_info {
	@include icon('question-circle', false);
	color: $text-color-light;
	cursor: help;
}

.search_input {
	@include text-input;
	@include transition(width);
	border: $border-width solid $input-border-color;
	box-shadow: .1em .1em .5em rgba($black, .2) inset;
	float: right;
	padding-right: (2 * $grid);
	width: (12 * $grid);

	@include respond-to(medium) {
		width: 100%;
	}

	&:focus {
		border: $border-width solid $input-border-color-focus;
		outline: 0;
	}

	&::placeholder {
		color: $text-color-light;
	}

	.-show-popup & {
		width: 100%;
	}
}

.search_label {
	&.-bold {
		font-weight: bold;
	}
}

.search_navigation {
	@include drop-shadow;
	background: $white;
	clip: rect(-999em (7 * $grid) 999em -999em); // Prevent tabs shadow from overlapping search form
	list-style: none;
	padding: 0;
	position: absolute;
	left: (-7 * $grid);
	top: 0;
	width: (7 * $grid);
	z-index: 1;

	@include respond-to(medium) {
		clip: rect(-999em 999em (2 * $grid) -999em);
		display: table;
		left: 0;
		table-layout: fixed;
		top: (-2 * $grid);
		width: 100%;
	}

	li {
		background: $shadow-light;
		display: block;
		border-bottom: $border-width solid $border-color;
		overflow: hidden; // Prevent links from overflowing border-radius
		vertical-align: top;

		@include respond-to(medium) {
			border-bottom: 0;
			border-right: $border-width solid $border-color;
			display: table-cell;
		}

		&:first-child {
			border-radius: $br 0 0;
		}

		&:last-child {
			border-bottom: 0;
			border-radius: 0 0 0 $br;

			@include respond-to(medium) {
				border-right: 0;
				border-radius: 0 $br 0 0;
			}
		}

		&.-active {
			background: $white;
			color: $link-color;
			font-weight: bold;
		}
	}

	a {
		@include link(false);
		@include transition(background);
		display: block;
		padding: (.5 * $grid);
		position: relative;
		text-overflow: ellipsis;

		@include hover {
			@include auto-color($brand-color);
			background: $brand-color;
		}

		@include respond-to(small) {
			height: (3 * $grid);
		}
	}
}

.search_popup {
	@include transition(opacity);
	opacity: 0;
	position: absolute;
	top: 0;
	width: 100%;
	visibility: hidden;

	.-show-popup & {
		opacity: 1;
		visibility: visible;
	}
}

.search_submit {
	@include icon('search', false);
	@include transition(color);
	background: none;
	border: 0;
	color: $link-color;
	font-size: 1.5em;
	height: (2 * $grid);
	position: absolute;
	right: (.5 * $grid);
	top: (.5 * $grid);
	width: (2 * $grid);

	@include hover {
		color: darken($link-color, 20);
	}
}

.search_subjects,
.search_tags {
	margin-left: $grid;
}

.search_area,
.search_subject,
.search_tag {
	&:before { // scss-lint:disable PseudoElement
		@include icon('caret-right');
		color: $input-border-color;
		margin-right: .5em;
	}
}
